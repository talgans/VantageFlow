import"./portfolio-new-11568175.js";import{g as ne}from"./request-e0109385.js";import{I as S}from"./internal-tracking-949bf92e.js";import{D as ge}from"./drb-toast-helpers-b5930a70.js";import{t as y}from"./google-tag-manager-utils-cbc0cd1f.js";import{c as me}from"./v2-check-circle-974aa791.js";import{S as he}from"./site-footer-d4d6d040.js";import{A as oe}from"./index-d6c1af7c.js";import{G as pe}from"./google-sign-in-03d1514c.js";import{P as E}from"./form-validation-58394433.js";import{b as ce}from"./contact-info-detection-helpers-88c9e017.js";import{c as U,e as fe}from"./expand-collapse-1ef905ba.js";import{D as C}from"./drb-confirm-helpers-15e164fa.js";import{D as be}from"./drb-dialog-helpers-7fc3e738.js";import{f as V,s as q}from"./pricing-03f3c7e1.js";import{A as de}from"./ai-input-1dd5e8c0.js";import{F as N}from"./form-handler-e91d0153.js";import{a as L}from"./v2-alert-pink-5610c78e.js";import{c as le}from"./check-verified-654e50fe.js";import{S as ue}from"./screen-transitions-928a9f1a.js";import{_ as Se}from"./preload-helper-b857222e.js";import{F as ve}from"./flickity-7e21c332.js";import{P as ye,a as De}from"./photoswipe-fe6228ab.js";import{a as Ae}from"./media-37c7c646.js";import{P as we}from"./project-cost-breakdown-e5c2ce24.js";import{S as qe}from"./site-nav-017004e5.js";import{c as ke,s as b}from"./index-ecfc279f.js";/* empty css                           */import"./unsafe-html-c2c7ba68.js";import"./chunk.6CTB5ZDJ-ecd2c56f.js";import"./throttle-3094f99e.js";import"./_commonjsHelpers-de833af9.js";import"./debounce-01590c98.js";import"./isSymbol-09cd3a26.js";import"./toNumber-7a06b4ca.js";import"./animation-7e2d11a2.js";import"./isEqual-d151e389.js";import"./_baseIsEqual-220da518.js";import"./isArray-e26b23e9.js";import"./_baseUnary-56bc5bee.js";import"./js.cookie-edb2da2a.js";import"./tiptap-extension-underline.esm-3123e256.js";import"./file-upload-af359e3e.js";import"./index-ec1be37d.js";import"./axios-8f19e258.js";import"./axios_helper-7e964c2e.js";import"./string-5478061d.js";import"./pluralize-e121862b.js";import"./url-36a92b4e.js";import"./site-nav-autocomplete-dbf97700.js";const l={config:{},run(){this.getController().processElements()},process(...e){for(const t of e)this.getController().processElement(t);return e.length},getController(){return this.controller?this.controller:this.controller=new l.Controller}};l.config.useFormat24=!1,l.config.i18n={en:{date:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yesterday:"yesterday",today:"today",tomorrow:"tomorrow",on:"on {date}",formats:{default:"%b %e, %Y",thisYear:"%b %e"}},time:{am:"am",pm:"pm",singular:"a {time}",singularAn:"an {time}",elapsed:"{time} ago",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",formats:{default:"%l:%M%P",default_24h:"%H:%M"}},datetime:{at:"{date} at {time}",formats:{default:"%B %e, %Y at %l:%M%P %Z",default_24h:"%B %e, %Y at %H:%M %Z"}}}},l.config.locale="en",l.config.defaultLocale="en",l.config.timerInterval=6e4;const Ce=!isNaN(Date.parse("2011-01-01T12:00:00-05:00"));l.parseDate=e=>(e=e.toString(),Ce||(e=function(t){const s=t.match(Ie);if(s){let r;const[i,a,n,o,d,c,u,g]=s;return g!=="Z"&&(r=g.replace(":","")),`${a}/${n}/${o} ${d}:${c}:${u} GMT${[r]}`}}(e)),new Date(Date.parse(e)));const Ie=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[-+]?[\d:]+)$/;l.elementMatchesSelector=(()=>{const e=document.documentElement,t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return(s,r)=>{if((s==null?void 0:s.nodeType)===Node.ELEMENT_NODE)return t.call(s,r)}})();const{config:T}=l,{i18n:Me}=T;l.getI18nValue=(e="",t={locale:T.locale})=>{const{locale:s}=t;return function(i,a){let n=i;for(var o of Array.from(a.split("."))){if(!n[o])return null;n=n[o]}return n}(Me[s],e)||(s!==T.defaultLocale?l.getI18nValue(e,{locale:T.defaultLocale}):void 0)},l.translate=(e,t={},s)=>{let r=l.getI18nValue(e,s);for(const i in t){const a=t[i];r=r.replace(`{${i}}`,a)}return r};const{getI18nValue:M,translate:j}=l,B=typeof(Intl==null?void 0:Intl.DateTimeFormat)=="function",R={"Central European Standard Time":"CET","Central European Summer Time":"CEST","China Standard Time":"CST","Israel Daylight Time":"IDT","Israel Standard Time":"IST","Moscow Standard Time":"MSK","Peru Standard Time":"PET","Philippine Standard Time":"PHT","Singapore Standard Time":"SGT","Western Indonesia Time":"WIB"};l.knownEdgeCaseTimeZones=R,l.strftime=(()=>{const e=(r,i)=>{const a=r.getDay(),n=r.getDate(),o=r.getMonth(),d=r.getFullYear(),c=r.getHours(),u=r.getMinutes(),g=r.getSeconds();return i.replace(/%(-?)([%aAbBcdeHIlmMpPSwyYZ])/g,(p,m,v)=>{switch(v){case"%":return"%";case"a":return M("date.abbrDayNames")[a];case"A":return M("date.dayNames")[a];case"b":return M("date.abbrMonthNames")[o];case"B":return M("date.monthNames")[o];case"c":return r.toString();case"d":return t(n,m);case"e":return n;case"H":return t(c,m);case"I":return t(e(r,"%l"),m);case"l":return c===0||c===12?12:(c+12)%12;case"m":return t(o+1,m);case"M":return t(u,m);case"p":return j("time."+(c>11?"pm":"am")).toUpperCase();case"P":return j("time."+(c>11?"pm":"am"));case"S":return t(g,m);case"w":return a;case"y":return t(d%100,m);case"Y":return d;case"Z":return function(D){let P,$,_;return($=function(I){return Object.keys(R).find(A=>B?new Date(I).toLocaleString("en-US",{timeZoneName:"long"}).includes(A):I.toString().includes(A))}(D))?R[$]:(_=s(D,{allowGMT:!1}))||(_=function(I){const A=I.toString();let w;if((w=A.match(/\(([\w\s]+)\)$/))!=null){const F=w[1];return/\s/.test(F)?F.match(/\b(\w)/g).join(""):F}if((w=A.match(/(\w{3,4})\s\d{4}$/))!=null||(w=A.match(/(UTC[\+\-]\d+)/))!=null)return w[1]}(D))?_:(P=s(D,{allowGMT:!0}))?P:""}(r)}})};function t(r,i){return i==="-"?r:`0${r}`.slice(-2)}function s(r,{allowGMT:i}){if(B){const a=new Date(r).toLocaleString("en-US",{timeZoneName:"short"}).split(" ").pop();if(i||!a.includes("GMT"))return a}}return e})(),l.CalendarDate=class{static fromDate(e){return new this(e.getFullYear(),e.getMonth()+1,e.getDate())}static today(){return this.fromDate(new Date)}constructor(e,t,s){this.date=new Date(Date.UTC(e,t-1)),this.date.setUTCDate(s),this.year=this.date.getUTCFullYear(),this.month=this.date.getUTCMonth()+1,this.day=this.date.getUTCDate(),this.value=this.date.getTime()}equals(e){return(e==null?void 0:e.value)===this.value}is(e){return this.equals(e)}isToday(){return this.is(this.constructor.today())}occursOnSameYearAs(e){return this.year===(e==null?void 0:e.year)}occursThisYear(){return this.occursOnSameYearAs(this.constructor.today())}daysSince(e){if(e)return(this.date-e.date)/864e5}daysPassed(){return this.constructor.today().daysSince(this)}};const{strftime:H,translate:h,getI18nValue:O,config:Te}=l;l.RelativeTime=class{constructor(e){this.date=e,this.calendarDate=l.CalendarDate.fromDate(this.date)}toString(){let e,t;return(t=this.toTimeElapsedString())?h("time.elapsed",{time:t}):(e=this.toWeekdayString())?(t=this.toTimeString(),h("datetime.at",{date:e,time:t})):h("date.on",{date:this.toDateString()})}toTimeOrDateString(){return this.calendarDate.isToday()?this.toTimeString():this.toDateString()}toTimeElapsedString(){let e;const t=new Date().getTime()-this.date.getTime(),s=Math.round(t/1e3),r=Math.round(s/60),i=Math.round(r/60);return t<0?null:s<10?(e=h("time.second"),h("time.singular",{time:e})):s<45?`${s} ${h("time.seconds")}`:s<90?(e=h("time.minute"),h("time.singular",{time:e})):r<45?`${r} ${h("time.minutes")}`:r<90?(e=h("time.hour"),h("time.singularAn",{time:e})):i<24?`${i} ${h("time.hours")}`:""}toWeekdayString(){switch(this.calendarDate.daysPassed()){case 0:return h("date.today");case 1:return h("date.yesterday");case-1:return h("date.tomorrow");case 2:case 3:case 4:case 5:case 6:return H(this.date,"%A");default:return""}}toDateString(){const e=this.calendarDate.occursThisYear()?O("date.formats.thisYear"):O("date.formats.default");return H(this.date,e)}toTimeString(){const e=Te.useFormat24?"default_24h":"default";return H(this.date,O(`time.formats.${e}`))}};const{elementMatchesSelector:Ee}=l;l.PageObserver=class{constructor(e,t){this.selector=e,this.callback=t,this.processMutations=this.processMutations.bind(this),this.processInsertion=this.processInsertion.bind(this)}start(){this.started||(this.observeWithMutationObserver()||this.observeWithMutationEvent(),this.started=!0)}observeWithMutationObserver(){return typeof MutationObserver<"u"&&MutationObserver!==null?(new MutationObserver(this.processMutations).observe(document.documentElement,{childList:!0,subtree:!0}),!0):!1}observeWithMutationEvent(){return addEventListener("DOMNodeInserted",this.processInsertion,!1),!0}findSignificantElements(e){const t=[];return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&(Ee(e,this.selector)&&t.push(e),t.push(...Array.from(e.querySelectorAll(this.selector)||[]))),t}processMutations(e){const t=[];for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)t.push(...this.findSignificantElements(r)||[]);this.notify(t)}processInsertion(e){const t=this.findSignificantElements(e.target);this.notify(t)}notify(e){(e==null?void 0:e.length)>0&&typeof this.callback=="function"&&this.callback(e)}};const{parseDate:Le,strftime:W,getI18nValue:Pe,config:x}=l,Y="time[data-local]:not([data-localized])",Z=e=>e.setAttribute("data-localized",""),k=e=>new l.RelativeTime(e);l.Controller=class{constructor(){this.processElements=this.processElements.bind(this),this.pageObserver=new l.PageObserver(Y,this.processElements)}start(){this.started||(this.processElements(),this.startTimer(),this.pageObserver.start(),this.started=!0)}startTimer(){let e;(e=x.timerInterval)&&(this.timer||(this.timer=setInterval(this.processElements,e)))}processElements(e){e||(e=document.querySelectorAll(Y));for(const t of Array.from(e))this.processElement(t);return e.length}processElement(e){const t=e.getAttribute("datetime"),s=e.getAttribute("data-local"),r=x.useFormat24&&e.getAttribute("data-format24")||e.getAttribute("data-format"),i=Le(t);if(!isNaN(i)){if(!e.hasAttribute("title")){const a=x.useFormat24?"default_24h":"default",n=W(i,Pe(`datetime.formats.${a}`));e.setAttribute("title",n)}(a=>{a.setAttribute("data-processed-at",new Date().toISOString())})(e),e.textContent=(()=>{switch(s){case"time":return Z(e),W(i,r);case"date":return Z(e),k(i).toDateString();case"time-ago":return k(i).toString();case"time-or-date":return k(i).toTimeOrDateString();case"weekday":return k(i).toWeekdayString();case"weekday-or-date":return k(i).toWeekdayString()||k(i).toDateString()}})()}}};let J=!1;function X(){l.getController().start()}l.start=()=>{var e;J?l.run():(J=!0,typeof MutationObserver<"u"&&MutationObserver!==null||(document.attachEvent?document.readyState==="complete":document.readyState!=="loading")?X():(e=X,typeof requestAnimationFrame=="function"?requestAnimationFrame(e):setTimeout(e,17)))},l.processing=()=>l.getController().started,window.LocalTime===l&&l.start();const _e={init(){this.bindEvents()},bindEvents(){document.addEventListener("click",e=>{const t=e.target.closest("[data-resume-user-card] [data-bookmark]"),s=e.target.closest("[data-extra-skills-btn]");t&&this.bookmarkUser(t),s&&this.toggleExtraSkills(e),this.handleProfileRedirect(e)})},handleProfileRedirect(e){var i,a;const t=(i=e.target.closest("[data-profile-path]"))==null?void 0:i.getAttribute("data-profile-path"),s=(a=e.target.closest("[data-resume-user-card][data-id]"))==null?void 0:a.getAttribute("data-id"),r=!!e.target.closest("a, input, button, label, drb-tooltip");!t||!s||r||(S.trackSearchProfileClicked(s,e.target),y("ProfileClicked",{userID:s}),window.open(t,"_blank").focus())},toggleExtraSkills(e){const t=e.target.closest("[data-resume-user-card-footer]"),s=t==null?void 0:t.querySelectorAll("[data-skills-item]"),r=e.target.closest("[data-extra-skills-btn]"),i=r==null?void 0:r.querySelector("[data-extra-skills-text-count]"),a=r==null?void 0:r.querySelector("[data-skills-text-hide]");s.forEach(n=>{n.classList.toggle("display-flex")}),i==null||i.classList.toggle("display-none"),a==null||a.classList.toggle("display-none")},async bookmarkUser(e){var u,g,p;if(!(((p=(g=(u=window.Dribbble)==null?void 0:u.JsConfig)==null?void 0:g.user)==null?void 0:p.isLoggedIn)||!1))return;const s=e.closest("[data-resume-user-card]"),r=s==null?void 0:s.getAttribute("data-username"),i=s==null?void 0:s.getAttribute("data-display-name"),a=s==null?void 0:s.getAttribute("data-saved-search-id");if(!r)return;const n=!e.hasAttribute("data-bookmarked"),o=a?`/client_app/talent/saved_searches/${a}/bookmarks/${r}`:`/client_app/talent/bookmarks/${r}`,c={path:n?"/client_app/talent/bookmarks":o,method:n?"POST":"DELETE",body:JSON.stringify({userId:r})};try{e.classList.add("btn2--loading");const{path:m,method:v,body:D}=c;if(!(await fetch(m,{method:v,body:D,headers:{"Content-Type":"application/json","X-CSRF-Token":ne(),"X-Requested-With":"XMLHttpRequest"}})).ok)throw new Error("Something went wrong");e.toggleAttribute("data-bookmarked",n),e.classList.toggle("btn2--icon-expand-animation",n),n&&(ge.open({title:"Designer Saved",messageHtml:`<span>${i||r} was saved to your <a href="/designers/bookmarks">Saved Designers</a></span>`,iconHtml:me,variant:"success",duration:5e3}),S.trackSearchDesignerBookmarked(s.getAttribute("data-id"),s))}catch{Dribbble.EventBus.$emit("siteNotifications:add",{title:"Error updating bookmark",id:"update-bookmark"})}finally{e.classList.remove("btn2--loading")}}};_e.init();document.addEventListener("submit",e=>{if(e.target.closest("form[data-on-submit-update-dom]")){const t=e.target,s=document.querySelector(t.dataset.onSubmitUpdateDom);if(s){e.preventDefault();const r=new FormData(t);fetch(t.action,{method:r.get("_method")||t.method,body:r,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(i=>i.text()).then(i=>{s.outerHTML=i}).catch(i=>{var a;return(a=Dribbble==null?void 0:Dribbble.Notify)==null?void 0:a.error(i)})}}});function Fe(e){var r;if(typeof window>"u")return!1;const s=(((r=Dribbble==null?void 0:Dribbble.JsConfig)==null?void 0:r.features)||{})[e];return typeof s>"u"?(console.warn(`Feature ${e} does not exist`),!1):s}const Ve=`<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path data-rotate="true"
    d="M26.3879 15.4262C27.91 11.2234 33.313 10.0749 36.413 13.2953L36.5991 13.4886C38.3908 15.3498 41.1684 15.8646 43.5081 14.7691L43.751 14.6553C47.7993 12.7598 52.4318 15.7682 52.3467 20.2374L52.3416 20.5056C52.2924 23.0887 53.8924 25.4167 56.3216 26.2965L56.5738 26.3879C60.7766 27.91 61.9251 33.313 58.7047 36.413L58.5114 36.5991C56.6502 38.3908 56.1354 41.1684 57.2309 43.5081L57.3447 43.751C59.2402 47.7993 56.2318 52.4318 51.7626 52.3467L51.4944 52.3416C48.9113 52.2924 46.5833 53.8924 45.7035 56.3216L45.6121 56.5738C44.09 60.7766 38.687 61.9251 35.587 58.7047L35.401 58.5114C33.6092 56.6502 30.8316 56.1354 28.4919 57.2309L28.249 57.3447C24.2007 59.2402 19.5682 56.2318 19.6533 51.7626L19.6584 51.4944C19.7076 48.9113 18.1076 46.5833 15.6784 45.7035L15.4262 45.6121C11.2234 44.09 10.075 38.687 13.2953 35.587L13.4886 35.4009C15.3499 33.6092 15.8646 30.8316 14.7691 28.4919L14.6553 28.249C12.7598 24.2007 15.7682 19.5682 20.2374 19.6533L20.5056 19.6584C23.0887 19.7076 25.4167 18.1076 26.2965 15.6784L26.3879 15.4262Z"
    fill="#ea4c89" />
  <path
    d="M44.9415 35.2704C44.9415 39.9345 41.1605 43.7154 36.4964 43.7154C35.4266 43.7154 34.4033 43.5165 33.4614 43.1536C33.2891 43.0873 33.203 43.0541 33.1346 43.0383C33.0672 43.0228 33.0185 43.0163 32.9494 43.0137C32.8792 43.011 32.8021 43.019 32.6481 43.0349L27.5602 43.5608C27.0751 43.611 26.8325 43.636 26.6895 43.5488C26.5648 43.4727 26.48 43.3458 26.4574 43.2016C26.4314 43.036 26.5473 42.8215 26.7791 42.3924L28.4042 39.3844C28.538 39.1367 28.605 39.0129 28.6353 38.8938C28.6652 38.7762 28.6724 38.6913 28.6629 38.5704C28.6532 38.4478 28.5994 38.2884 28.4919 37.9695C28.2063 37.1219 28.0514 36.2143 28.0514 35.2704C28.0514 30.6063 31.8324 26.8254 36.4964 26.8254C41.1605 26.8254 44.9415 30.6063 44.9415 35.2704Z"
    stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
</svg>`;class Re{constructor(t,s){this.messageDialog=t,this.projectDetailsAiInstance=this.initProjectDetailsAiInput(),this.messageDialogHelper=s,!(!this.messageDialog||!this.projectDetailsAiInstance||!this.messageDialogHelper)&&(this.initHelpMeStartForm(),this.bindImproveWhatIWrote(),this.bindRevertButton())}initProjectDetailsAiInput(){var i;const t=this.messageDialog.querySelector("[data-project-details-input]"),s=t==null?void 0:t.closest("[data-write-with-ai-wrapper]"),r=(i=s==null?void 0:s.querySelector("turbo-cable-stream-source"))==null?void 0:i.getAttribute("data-request-id");return!t||!r?(console.error("Missing required parameters: projectDetailsInput or requestId"),null):new de({contextElement:s,input:t,requestId:r,onError:(a,{action:n})=>{console.error("AI generation error:",a),n==="build_project_request"&&this.showHelpMeStartPanel(!0),C.open({title:"Something went wrong. Please try again.",iconHtml:L,centered:!0,cancelText:"",confirmText:"Close"})}})}initHelpMeStartForm(){var i;const t=this.messageDialog.querySelector("form[data-help-me-start-request-form]");if(!t)return;const s=new N(t,{onBeforeSubmit:a=>{const n=t.getAttribute("data-help-me-start-request-path");return this.showHelpMeStartPanel(!1),this.projectDetailsAiInstance.generateContent("build_project_request",n,{notes:"",...a}),!1},arrayFields:["styles"]}),r=t.querySelector("[data-styles-select]");(i=s.pristineValidation)==null||i.addValidator(r,a=>a.length>0&&a.length<=3,"Please select between 1 and 3 categories")}bindImproveWhatIWrote(){const t=this.projectDetailsAiInstance.contextElement.querySelector('[data-ai-action="improve"]');t==null||t.addEventListener("click",s=>{var o;const r=s.target.closest("form");if(!((o=r==null?void 0:r.pristineValidation)!=null&&o.validate(this.projectDetailsAiInstance.input)))return;const i=r.getAttribute("data-ai-request-path"),a=r.getAttribute("data-designer-name"),n={input_text:this.projectDetailsAiInstance.input.value,designer_name:a};this.projectDetailsAiInstance.generateContent("improve_project_request",i,n)})}bindRevertButton(){const t=this.messageDialog.querySelector("[data-ai-input-revert-button]");t==null||t.addEventListener("click",()=>this.projectDetailsAiInstance.revertContent())}showHelpMeStartPanel(t){this.messageDialogHelper.setActiveTab(t?"help-me-start":"message")}}const He={init(){this.bindListeners(),this.openAndRestoreDraft()},getClosestMessageDialog(e){return e.closest("drb-dialog#message-dialog")},bindListeners(){this.bindMessageInputSync(),this.bindBriefSelect(),this.bindTabNavigation(),this.bindFormValidation(),this.bindAuthFlow(),this.bindTrackingListeners(),this.initAiInputs()},initAiInputs(){document.addEventListener("drb-dialog-content-updated",e=>{const t=e.target.closest("drb-dialog#message-dialog");t&&new Re(t,this)})},bindTabNavigation(){document.addEventListener("click",e=>{var s;const t=(s=e.target.closest("[data-message-dialog-tab]"))==null?void 0:s.getAttribute("data-message-dialog-tab");t&&this.setActiveTab(t)})},setActiveTab(e){var t;document.querySelectorAll("drb-dialog#message-dialog [data-message-dialog-tab]").forEach(s=>{s.classList.toggle("active",e===s.getAttribute("data-message-dialog-tab"))}),(t=document.querySelector("drb-dialog#message-dialog [data-active-tab]"))==null||t.setAttribute("data-active-tab",e)},bindMessageInputSync(){document.addEventListener("input",e=>{const t=this.getClosestMessageDialog(e.target);if(!t)return;const s=t.querySelectorAll("#message-dialog-message, #message-dialog-details");if(!Array.from(s).includes(e.target))return;s.forEach(i=>{i.value=e.target.value});const r=t.querySelector("[data-message-auth-preview]");r&&(r.textContent=e.target.value.slice(0,150))})},bindBriefSelect(){document.addEventListener("change",async e=>{const t=this.getClosestMessageDialog(e.target),s=e.target.closest("[data-message-dialog-brief-select]"),r=s==null?void 0:s.value;if(!t||!r)return;const i=new URL(t.remoteUrl,window.location.origin);i.searchParams.set("project_brief_id",r),t.remoteUrl=i.toString(),await t.fetchRemoteUrl(!0),t.hasRemoteError=!1})},bindFormValidation(){document.addEventListener("drb-dialog-content-updated",e=>{const t=this.getClosestMessageDialog(e.target);t&&(t.querySelectorAll("[data-message-dialog-form]").forEach(s=>{s.pristineValidation=E(s),this.bindBudgetFieldLogic(s),this.bindProjectEstimateFields(s),ce(s)}),this.clearDraft())}),document.addEventListener("submit",e=>{var r,i,a,n;const t=e.target.closest("[data-message-dialog-form]"),s=(a=(i=(r=window.Dribbble)==null?void 0:r.JsConfig)==null?void 0:i.user)==null?void 0:a.isLoggedIn;if(t)if(e.preventDefault(),!t.hasAttribute("is-submitting")&&((n=t.pristineValidation)!=null&&n.validate()))Fe("loggedOutMessageFlow")&&!s?(this.saveDraft(),this.setActiveTab("auth")):this.submitForm(t);else{this.clearDraftSendingMessageState();const o=t==null?void 0:t.querySelector(".has-validation-error");o==null||o.scrollIntoView({behavior:"smooth",block:"nearest"})}})},bindBudgetFieldLogic(e){var i,a;const t=e.querySelector("[data-project-budget]"),s=e.querySelector("[data-project-budget-unsure]");if(!t||!s)return;t.addEventListener("input",()=>{t.value=V(t.value,{maximumFractionDigits:0})}),t.value&&(t.value=V(t.value,{maximumFractionDigits:0}));const r=Number(t.getAttribute("data-project-budget-min-cost"));(i=e.pristineValidation)==null||i.addValidator(t,n=>s.checked?!0:(q(n)||0)>=r,`Budget must be at least $${r}`,1,!0),(a=e.pristineValidation)==null||a.addValidator(t,n=>s.checked?!0:!!(n!=null&&n.length),"Please enter your budget.",2,!0),s.addEventListener("change",()=>{var n;t.toggleAttribute("disabled",s.checked),t.value="",s.checked&&((n=e.pristineValidation)==null||n.validate(t)),t.pristine&&(t.pristine.hasValidated=!1)})},bindProjectEstimateFields(e){var a,n;const t=e.querySelector("[data-estimate-min-input]"),s=e.querySelector("[data-estimate-max-input]");if(!t||!s)return;const r=q(t.getAttribute("data-estimate-min-cost"))||10,i=`Minimum cost estimate is $${r}`;(a=e.pristineValidation)==null||a.addValidator(t,o=>(q(o)||0)>=r,i,1,!0),(n=e.pristineValidation)==null||n.addValidator(s,o=>{const d=q(t.value)||0,c=q(o)||0;return o!=null&&o.length?c>d:!0},"Max must be greater than Min",1,!0),[s,t].forEach(o=>{o.addEventListener("input",()=>{o.value=V(o.value,{maximumFractionDigits:0})})})},bindTrackingListeners(){document.addEventListener("drb-dialog-content-updated",e=>{var i;const t=this.getClosestMessageDialog(e.target);if(!t)return;const s=t.querySelector("[data-message-dialog-form]"),r=(i=s==null?void 0:s.querySelector("input[name='engagement[recipient_id]']"))==null?void 0:i.value;r&&(S.trackSearchMessageModalDisplayed(r,t),y("MessageModalDisplayed",{userId:r}))})},bindAuthFlow(){document.addEventListener("drb-dialog-content-updated",e=>{const t=this.getClosestMessageDialog(e.target);if(!t)return;t.querySelectorAll("[data-message-auth-container] [data-screen]").forEach(r=>oe.initScreen(r))}),document.addEventListener("auth-screen-injected",e=>{const t=this.getClosestMessageDialog(e.target),s=e.target,r=s==null?void 0:s.getAttribute("data-screen"),i=s==null?void 0:s.querySelector("form[data-auth-form]"),a=i==null?void 0:i.querySelector("[data-skip-profile-button]"),n=i==null?void 0:i.querySelector("[data-submit]");if(!t||r!=="auth-profile"||!i)return;const o=document.createElement("input");o.type="hidden",o.name="end_of_flow",o.value="true";const d=document.createElement("input");d.type="hidden",d.name="intentions",d.value="hire",i.appendChild(o),i.appendChild(d),a&&(a.addEventListener("click",c=>{c.preventDefault(),i.requestSubmit()}),a.removeAttribute("data-screen-transition"),a.textContent="Skip and Send Message"),n&&(n.textContent="Send Message")})},async submitForm(e){var o,d;const t="Failed to send message",s=e.querySelector("[data-message-dialog-submit]"),r=e.querySelector("[data-form-error]"),i=e.hasAttribute("data-reload-on-success"),a=c=>{e.toggleAttribute("is-submitting",c),s.disabled=c,s.classList.toggle("btn2--loading",c)},n=c=>{r&&(r.toggleAttribute("hidden",!c),r.innerText=c)};a(!0),n(null);try{const c=await fetch(e.getAttribute("action"),{method:"POST",body:this.getTransformedFormData(e),headers:{"X-Requested-With":"XMLHttpRequest"}}),u=await c.text();if(!c.ok){const v=c.status===422?u:t;throw new Error(v||t)}const g=(o=e.querySelector("[data-recipient-id-input]"))==null?void 0:o.value;g&&S.trackSearchUserMessaged(g);const p=e.closest("drb-dialog"),m=((d=p.querySelector("[data-message-id]"))==null?void 0:d.getAttribute("data-message-id"))||null;if(y("UserMessaged",{recipientId:g,messageID:m}),i){window.location.reload();return}u!=null&&u.includes("data-suggested-designers")?this.showSuggestedDesigners(p,u):p==null||p.setContent(u)}catch(c){const u=c instanceof Error?c.message:t;n(u),console.error(u,c)}finally{this.clearDraftSendingMessageState(),i||a(!1)}},getTransformedFormData(e){const t=new FormData(e);switch(["budget_dollars","message[cost_estimate_min]","message[cost_estimate_max]"].forEach(s=>{t.has(s)&&t.set(s,q(t.get(s)))}),e.getAttribute("data-message-dialog-form")){case"workRequest":t.set("engagement[budget_cents]",parseInt(t.get("budget_dollars")||0,10)*100),t.delete("budget_dollars");break}return t},showSuggestedDesigners(e,t){const s=e==null?void 0:e.querySelector("[data-message-success-container]"),r=e==null?void 0:e.querySelector("[data-message-dialog-form-content]");!r||!s||(s.innerHTML=t,s.toggleAttribute("hidden",!1),U(r),r.setAttribute("inert",""),this.bindToggleFormBtn(e),this.bindViewSentMessageBtn(e),this.rebindFormValidation(e),this.bindSendBulkRequest(e),this.bindMoreDesignersToggle(e))},bindMoreDesignersToggle(e){const t=e==null?void 0:e.querySelector("[data-more-designers-toggle]"),s=e==null?void 0:e.querySelector("[data-more-suggested-designers-list]");!t||!s||t==null||t.addEventListener("click",()=>{const r=t.querySelector('input[type="checkbox"]');s.querySelectorAll("[data-suggested-designer]").forEach(i=>{i.checked=r.checked})})},bindToggleFormBtn(e){const t=e==null?void 0:e.querySelector("[data-toggle-form-btn]"),s=e==null?void 0:e.querySelector("[data-message-dialog-form-content]");!e||!t||!s||t.addEventListener("click",()=>{s.hasAttribute("data-collapsed")?(fe(s),t.textContent="Hide Message",s.removeAttribute("inert")):(U(s),t.textContent="Edit Message",s.setAttribute("inert",""))})},bindViewSentMessageBtn(e){var r;const t=e==null?void 0:e.querySelector("[data-view-sent-message-btn]"),s=((r=e==null?void 0:e.querySelector("[data-thread-path]"))==null?void 0:r.getAttribute("data-thread-path"))||"";!t||!s||t.addEventListener("click",()=>{window.location=s})},bindSendBulkRequest(e){const t=e.querySelector('[data-message-dialog-form="workRequest"]'),s=e==null?void 0:e.querySelector("[data-send-bulk-request]");!s||!e||!t||s.addEventListener("click",()=>{var r;!t.hasAttribute("is-submitting")&&((r=t.pristineValidation)!=null&&r.validate())&&this.sendBulkRequest(e)})},async sendBulkRequest(e){var d;const t=e.querySelector('[data-message-dialog-form="workRequest"]'),s=e.querySelector("[data-send-bulk-request]"),r=s==null?void 0:s.getAttribute("data-send-bulk-request");if(!t||!s||!r)return;const i=Array.from(t.querySelectorAll("[data-suggested-designer]:checked")).map(c=>c.value),a=this.getTransformedFormData(t),n=((d=e.querySelector("[data-message-id]"))==null?void 0:d.getAttribute("data-message-id"))||null;a.delete("engagement[recipient_id]"),i.forEach(c=>{a.append("engagement[recipient_id][]",c)}),a.set("engagement[message_id]",n);const o=c=>{t.toggleAttribute("is-submitting",c),s.disabled=c,s.classList.toggle("btn2--loading",c)};try{if(o(!0),!(await fetch(r,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest"}})).ok)throw new Error("Something went wrong. Please try again later.");e.close(),i.forEach(u=>{S.trackSearchUserMessaged(u),y("UserMessaged",{recipientId:u,parentMessageID:n})}),C.open({title:"Your messages have been sent!",iconHtml:le,centered:!0,cancelText:"Close",confirmText:""})}catch(c){o(!1),C.open({title:c,iconHtml:L,centered:!0,cancelText:"",confirmText:"Close"})}},rebindFormValidation(e){const t=e.querySelector('[data-message-dialog-form="workRequest"]');t&&(t.pristineValidation&&t.pristineValidation.destroy(),t.pristineValidation=E(t))},open(e,t={}){return e?be.openRemote({url:`/messages/new?recipient_id=${e}`,dialogId:"message-dialog",nonModalMode:!0,...t}):null},saveDraft(){var a,n;const e=document.querySelector("drb-dialog#message-dialog"),t=!!((a=e==null?void 0:e.querySelector("[data-message-dialog-toggle]"))!=null&&a.checked),s=(n=e==null?void 0:e.querySelector("[data-recipient-id-input]"))==null?void 0:n.value;if(!e||!s)return;const r=["message[body]","engagement[project_details]","engagement[target_date]","budget_dollars"],i={isWorkRequest:t,recipientId:s,fields:{}};r.forEach(o=>{const d=e.querySelector(`form[data-message-dialog-form] [name="${o}"]`);d&&(i.fields[o]=d.value)}),localStorage.setItem("messageDraft",JSON.stringify(i))},openAndRestoreDraft(){var t,s,r;if((r=(s=(t=window.Dribbble)==null?void 0:t.JsConfig)==null?void 0:s.user)!=null&&r.isLoggedIn)try{const i=JSON.parse(localStorage.getItem("messageDraft"));if(!i)return;const{isWorkRequest:a,recipientId:n,fields:o}=i,d=`
        <div class="message-dialog-sending">
          ${Ve}
          <h3 class="type-title-s">Sending message...</h3>
        </div>
      `,c=this.open(n,{remoteLoadingSlotHtml:d,remoteInitialHeight:"fit-content",shouldResetIsFetching:!1});if(!c)return;c.addEventListener("drb-dialog-content-updated",()=>{setTimeout(()=>{const u=c.querySelector("[data-message-dialog-toggle]");u&&(u.checked=a),Object.entries(o).forEach(([g,p])=>{const m=c.querySelector(`form[data-message-dialog-form] [name="${g}"]`);m&&(m.value=p)}),setTimeout(()=>{const g=c.querySelector(`[data-message-dialog-form="${a?"workRequest":"message"}"]`);g==null||g.requestSubmit()},0)},0)},{once:!0})}catch(i){console.error("Failed to restore message draft:",i)}},clearDraftSendingMessageState(){const e=document.querySelector("drb-dialog#message-dialog");e&&(e.isFetchingRemote=!1)},clearDraft(){localStorage.removeItem("messageDraft")}};function f(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.type)==="drb-video"}class Oe{constructor(t,s){this.options=s,this.initLightboxEvents(t),t.on("init",()=>{this.initPswpEvents(t.pswp)})}initLightboxEvents(t){t.on("contentLoad",this.onContentLoad.bind(this)),t.on("contentDestroy",this.onContentDestroy.bind(this)),t.on("contentActivate",this.onContentActivate.bind(this)),t.on("contentDeactivate",this.onContentDeactivate.bind(this)),t.on("contentAppend",this.onContentAppend.bind(this)),t.on("contentResize",this.onContentResize.bind(this)),t.addFilter("isKeepingPlaceholder",this.isKeepingPlaceholder.bind(this)),t.addFilter("isContentZoomable",this.isContentZoomable.bind(this)),t.addFilter("useContentPlaceholder",this.useContentPlaceholder.bind(this)),t.addFilter("domItemData",(s,r,i)=>(s.type==="video"&&i&&(i.dataset.pswpVideoSources?s.videoSources=JSON.parse(i.dataset.pswpVideoSources):i.dataset.pswpVideoSrc?s.videoSrc=i.dataset.pswpVideoSrc:s.videoSrc=i.href),s))}initPswpEvents(t){t.on("pointerDown",s=>{const r=t.currSlide;if(f(r)&&this.options.preventDragOffset){const i=s.originalEvent;if(i.type==="pointerdown"){const n=Math.ceil(r.height*r.currZoomLevel)+r.bounds.center.y,o=i.pageY-t.offset.y;o>n-this.options.preventDragOffset&&o<n&&s.preventDefault()}}}),t.on("appendHeavy",s=>{f(s.slide)&&!s.slide.isActive&&s.preventDefault()}),t.on("close",()=>{f(t.currSlide.content)&&((!t.options.showHideAnimationType||t.options.showHideAnimationType==="zoom")&&(t.options.showHideAnimationType="fade"),this.pauseVideo(t.currSlide.content))})}onContentDestroy({content:t}){f(t)&&t._videoPosterImg&&(t._videoPosterImg.onload=null,t._videoPosterImg.onerror=null,t._videoPosterImg=null)}onContentResize(t){if(f(t.content)){t.preventDefault();const{width:s,height:r,content:i}=t;if(i.element&&(i.element.style.width=`${s}px`,i.element.style.height=`${r}px`),i.slide&&i.slide.placeholder){const a=i.slide.placeholder.element.style;a.transform="none",a.width=`${s}px`,a.height=`${r}px`,a.borderRadius="8px"}}}isKeepingPlaceholder(t,s){return f(s)?!1:t}isContentZoomable(t,s){return f(s)?!1:t}onContentActivate({content:t}){f(t)&&this.options.autoplay&&this.playVideo(t)}onContentDeactivate({content:t}){f(t)&&this.pauseVideo(t)}onContentAppend(t){f(t.content)&&(t.preventDefault(),t.content.isAttached=!0,t.content.appendImage())}onContentLoad(t){const{content:s}=t;if(f(t.content)&&(t.preventDefault(),!s.element)){if(s.state="loading",s.type="drb-video",s.element=document.createElement("drb-video"),s.videoElement=document.createElement("video"),s.element.appendChild(s.videoElement),this.options.videoAttributes)for(const r in this.options.videoAttributes)s.videoElement.setAttribute(r,this.options.videoAttributes[r]||"");s.videoElement.setAttribute("poster",s.data.msrc),this.preloadVideoPoster(s,s.data.msrc),s.element.style.position="absolute",s.element.style.left=0,s.element.style.top=0,s.data.videoSources?s.data.videoSources.forEach(r=>{const i=document.createElement("source");i.src=r.src,i.type=r.type,s.videoElement.appendChild(i)}):s.data.videoSrc&&(s.videoElement.src=s.data.videoSrc)}}preloadVideoPoster(t,s){if(!t._videoPosterImg&&s)if(t._videoPosterImg=new Image,t._videoPosterImg.src=s,t._videoPosterImg.complete)t.onLoaded();else{const r=()=>{t.onLoaded()};t._videoPosterImg.onload=r,t._videoPosterImg.onerror=r}}playVideo(t){setTimeout(()=>{var s;(s=t.videoElement)==null||s.play()},0)}pauseVideo(t){var s;(s=t.videoElement)==null||s.pause()}useContentPlaceholder(t,s){return f(s)?!0:t}}const xe={videoAttributes:{playsinline:"",preload:"auto",loop:""},autoplay:!0,preventDragOffset:80};class Ne{constructor(t,s){new Oe(t,{...xe,...s})}}const $e={init(){document.addEventListener("drb-dialog-content-updated",t=>{const s=t.target.closest("drb-dialog#service-view-dialog");s&&setTimeout(()=>{this.setupServiceView(s)},0)}),document.addEventListener("drb-dialog-closed",t=>{const s=t.target.closest("drb-dialog#service-view-dialog");s&&s.querySelectorAll("video").forEach(r=>{r.pause()})});const e=document.querySelector("[data-service-view-page]");e&&this.setupServiceView(e),we.init()},setupServiceView(e){this.initFlickity(e),this.bindThumbnails(e),this.initLightbox(e),this.bindCTAButtons(e),this.bindSelectPaymentMethod(e),this.bindDialogValidation(e)},playPauseCarouselVideos(e){var r,i,a,n;const t=(i=(r=e.flkty)==null?void 0:r.selectedElement)==null?void 0:i.querySelector("video"),s=(n=(a=e.lightbox)==null?void 0:a.pswp)==null?void 0:n.isOpen;e.querySelectorAll("video").forEach(o=>{o===t&&!s?o.play():o.pause()})},initFlickity(e){const t=e.querySelector("[data-service-view-carousel]");if(!t)return;const s=e.querySelectorAll("[data-service-view-gallery-thumbnail]").length>1,r=matchMedia("(hover: none)").matches;e.flkty&&e.flkty.destroy(),e.flkty=new ve(t,{wrapAround:!0,contain:!0,prevNextButtons:s,pageDots:!1,draggable:s&&r}),e.flkty.on("change",i=>{e.querySelectorAll("[data-service-view-gallery-button]").forEach((a,n)=>{a.toggleAttribute("data-current",i===n)}),this.playPauseCarouselVideos(e)}),e.flkty.on("staticClick",(i,a,n,o)=>{var d;i.target.tagName!=="DRB-VIDEO"&&((d=e.lightbox)==null||d.loadAndOpen(o))}),setTimeout(()=>{t.toggleAttribute("data-carousel-initialized",!0)},0)},bindThumbnails(e){e.querySelectorAll("[data-service-view-gallery-button]").forEach((t,s)=>{t.addEventListener("click",()=>{var r;(r=e.flkty)==null||r.selectCell(s)})})},initLightbox(e){e.lightbox&&e.lightbox.destroy();const t=e.querySelector('[slot="dialog-outer"]')||document.body;e.lightbox=new ye({secondaryZoomLevel:"fill",doubleTapAction:!1,arrowPrev:!1,arrowNext:!1,appendToEl:t,dataSource:[],...De,pswpModule:()=>Se(()=>import("./photoswipe.esm-3ee328cd.js"),[])}),e.lightbox.addFilter("thumbEl",(s,r,i)=>e.querySelectorAll("[data-lightbox-trigger]")[i]||s),e.lightbox.on("change",()=>{var r;const{currIndex:s}=e.lightbox.pswp;(r=e.flkty)==null||r.selectCell(s)}),e.lightbox.on("openingAnimationStart",()=>{this.playPauseCarouselVideos(e)}),e.lightbox.on("destroy",()=>{setTimeout(()=>{this.playPauseCarouselVideos(e)},0)}),new Ne(e.lightbox),e.lightbox.init(),e.querySelectorAll("[data-lightbox-trigger]").forEach(s=>{var i,a;const r=this.getPhotoswipeData(s);r&&((a=(i=e.lightbox.options)==null?void 0:i.dataSource)==null||a.push(r))})},getPhotoswipeData(e){const t=parseInt(e.getAttribute("data-media-width")||400,10),s=parseInt(e.getAttribute("data-media-height")||300,10),r=e.getAttribute("data-media-type"),i=e.getAttribute("data-lightbox-url"),a=e.getAttribute("data-preview-url"),n=e.getAttribute("data-file-name"),o=!!a&&!!i&&!!s&&!!t,d=n.endsWith(".gif");if(!o)return null;if(r==="video")return{videoSrc:i,type:"drb-video",msrc:a,width:t,height:s,thumbCropped:!0};const c=[t,640,850,1024,1600,1905,2400,3810].filter(g=>g<=t);return{srcset:d?null:Ae({mediaUrl:i,aspectRatio:t/s,widths:c}),src:i,msrc:a,width:t,height:s,thumbCropped:!0}},bindCTAButtons(e){const t=e==null?void 0:e.querySelectorAll("[data-service-view-toggle-panel]"),s=e==null?void 0:e.querySelectorAll("[data-service-view-panel]");t.forEach(r=>{r.addEventListener("click",()=>{s.forEach(i=>{i.toggleAttribute("hidden")})})})},bindSelectPaymentMethod(e){const t=e==null?void 0:e.querySelector("[data-project-breakdown-payment-method-select]");t==null||t.addEventListener("change",()=>{this.updateSelectedPaymentMethod(e,t.value)})},updateSelectedPaymentMethod(e,t){const s=e==null?void 0:e.querySelector("[data-project-breakdown-filter-payment-method]");this.updateCheckoutUrl(e,t),s==null||s.setAttribute("data-project-breakdown-filter-payment-method",t)},updateCheckoutUrl(e,t){const s=e.querySelector("[data-checkout-button]");if(!s)return;const r=s.getAttribute("href")||"",i=new URL(r,window.location.origin);i.searchParams.set("payment_method_type",t),s.setAttribute("href",i.toString())},bindDialogValidation(e){const t=e.querySelector("[data-checkout-button]");e.pristineValidation=E(e),t==null||t.addEventListener("click",s=>{e.pristineValidation.validate()||s.preventDefault()})}};class Ue{constructor(t){this.dialog=t,this.serviceDetailsAiInstance=this.initServiceDetailsAiInput(),!(!this.dialog||!this.serviceDetailsAiInstance)&&(this.initHelpMeStartForm(),this.bindImproveWhatIWroteAction(),this.bindHelpMeStartAction(),this.bindRevertButton())}initServiceDetailsAiInput(){var i;const t=this.dialog.querySelector("[data-service-request-input]"),s=t==null?void 0:t.closest("[data-write-with-ai-wrapper]"),r=(i=s==null?void 0:s.querySelector("turbo-cable-stream-source"))==null?void 0:i.getAttribute("data-request-id");return!t||!r?(console.error("Missing required parameters: serviceDetailsInput or requestId"),null):new de({contextElement:s,input:t,requestId:r,onError:(a,{action:n})=>{console.error("AI generation error:",a),n==="build_service_request"&&this.showHelpMeStartPanel(!0),C.open({title:"Something went wrong. Please try again.",iconHtml:L,centered:!0,cancelText:"",confirmText:"Close"})}})}initHelpMeStartForm(){var i;const t=this.dialog.querySelector("form[data-help-me-start-request-form]");if(!t)return;const s=new N(t,{onBeforeSubmit:a=>{const n=t.getAttribute("data-help-me-start-request-path");return this.showHelpMeStartPanel(!1),this.serviceDetailsAiInstance.generateContent("build_service_request",n,{notes:"",...a}),!1},arrayFields:["styles"]}),r=t.querySelector("[data-styles-select]");(i=s.pristineValidation)==null||i.addValidator(r,a=>a.length>0&&a.length<=3,"Please select between 1 and 3 categories")}bindImproveWhatIWroteAction(){const t=this.serviceDetailsAiInstance.contextElement.querySelector('[data-ai-action="improve"]');t==null||t.addEventListener("click",s=>{var c,u,g;const r=s.target.closest("form");if(!((c=r==null?void 0:r.pristineValidation)!=null&&c.validate(this.serviceDetailsAiInstance.input)))return;const i=r.getAttribute("data-ai-request-path"),a=r.getAttribute("data-designer-name"),n=(u=this.dialog.querySelector("#service-title"))==null?void 0:u.value,o=(g=this.dialog.querySelector("#service-description"))==null?void 0:g.value,d={input_text:this.serviceDetailsAiInstance.input.value,designer_name:a,service_title:n,service_description:o};this.serviceDetailsAiInstance.generateContent("improve_service_request",i,d)})}bindRevertButton(){const t=this.serviceDetailsAiInstance.contextElement.querySelector("[data-ai-input-revert-button]");t==null||t.addEventListener("click",()=>this.serviceDetailsAiInstance.revertContent())}showHelpMeStartPanel(t){var i,a;const s=(i=this.dialog)==null?void 0:i.querySelector('[data-screen="service"]'),r=(a=this.dialog)==null?void 0:a.querySelector('[data-screen="help-me-start"]');ue.transitionToScreen({targetScreen:t?r:s,type:t?"slide-left":"slide-right"})}bindHelpMeStartAction(){const t=this.serviceDetailsAiInstance.contextElement.querySelector('[data-ai-action="help_me_start"]');t==null||t.addEventListener("click",()=>this.showHelpMeStartPanel(!0))}}const je={init(e){e&&(this.dialog=e,this.bindListeners(),this.initForm())},bindListeners(){this.bindMoreServicesToggle()},bindMoreServicesToggle(){var s,r;const e=(s=this.dialog)==null?void 0:s.querySelector("[data-more-services-toggle]"),t=(r=this.dialog)==null?void 0:r.querySelector("[data-extra-suggested-services]");!e||!t||e.addEventListener("click",()=>{const i=e.querySelector('input[type="checkbox"]');t.querySelectorAll("[data-suggested-service]").forEach(a=>{a.checked=i.checked})})},initForm(){const e=this.dialog.querySelector("[data-suggested-services-form]");e&&(this.formHandler=new N(e,{transformData:t=>({service_offering_ids:Array.from(e.querySelectorAll("[data-suggested-service]:checked")).map(r=>r.value)||[],message_id:t.message_id,message_body:t.message_body||""}),onError:(t,s)=>{C.open({title:s,message:"Please try again later.",iconHtml:L,centered:!0,cancelText:"",confirmText:"Close"})},onSuccess:async()=>{this.dialog.close(),C.open({title:"Your messages have been sent!",iconHtml:le,centered:!0,cancelText:"Close",confirmText:""});const t=Array.from(e.querySelectorAll("[data-suggested-service]:checked")).map(r=>r.value)||[],s=e.querySelector('input[name="message_id"]').value||null;t.forEach(r=>{S.trackSearchUserMessaged(r),y("UserMessaged",{recipientId:r,parentMessageID:s})})}}),e.pristineValidation=this.formHandler.pristineValidation)}},Be={init(){this.bindListeners()},bindListeners(){document.addEventListener("drb-dialog-content-updated",e=>{const t=e.target.closest("drb-dialog#service-request-dialog");t&&(this.initServiceRequestForm(t),new Ue(t))})},initServiceRequestForm(e){const t=e.querySelector("[data-service-request-form]"),s=t==null?void 0:t.getAttribute("data-recipient-id");!t||!s||(S.trackSearchMessageModalDisplayed(s,e),y("MessageModalDisplayed",{recipientId:s}),this.bindFormValidation(t))},bindFormValidation(e){e.pristineValidation=E(e),ce(e),e.addEventListener("submit",t=>{t.preventDefault(),this.submitForm(e)})},async submitForm(e){var n,o;if(e.hasAttribute("is-submitting")||!((n=e.pristineValidation)!=null&&n.validate()))return;const t="Failed to send message",s=e.querySelector("[data-service-request-submit]"),r=e.querySelector("[data-form-error]"),i=d=>{e.toggleAttribute("is-submitting",d),s.disabled=d,s.classList.toggle("btn2--loading",d)},a=d=>{r&&(r.toggleAttribute("hidden",!d),r.innerText=d)};i(!0),a(null);try{const d=await fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":ne()}});if(!d.ok){const m=await d.text(),v=d.status===422?m:t;throw new Error(v||t)}const c=await d.text(),u=e.closest("drb-dialog");u==null||u.setContent(c),je.init(u);const g=e.getAttribute("data-recipient-id"),p=(o=u.querySelector("[data-message-id]"))==null?void 0:o.getAttribute("data-message-id");g&&S.trackSearchUserMessaged(g),y("UserMessaged",{messageID:p,recipientId:g})}catch(d){const c=d instanceof Error?d.message:t;a(c),console.error(c,d),i(!1)}}};ke.forms.mode="off";b.drive=!1;var G;(G=b.pageObserver)==null||G.stop();var z;(z=b.cacheObserver)==null||z.stop();var K;(K=b.linkPrefetchObserver)==null||K.stop();var Q;(Q=b.formLinkClickObserver)==null||Q.stop();var ee;(ee=b.linkClickObserver)==null||ee.stop();var te;(te=b.formSubmitObserver)==null||te.stop();var se;(se=b.scrollObserver)==null||se.stop();var re;(re=b.frameRedirector)==null||re.stop();var ie;(ie=b.history)==null||ie.stop();var ae;(ae=b.preloader)==null||ae.stop();b.started=!1;pe.init();oe.init();ue.init();qe.init();$e.init();Be.init();He.init();he.init();l.start();
//# sourceMappingURL=application-513afbb3.js.map
